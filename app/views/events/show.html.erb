<%= javascript_pack_tag "googlemaps" %>
<script type="text/javascript" src="https://maps.googleapis.com/maps/api/js?v=3.exp&key=AIzaSyByjwkYLV7LF8vzH8hRkJKkD0e0xMbmx8o"></script>

<h1> Event </h1>
<%= link_to "Edit", edit_event_path(@event) %> | <%= link_to "Delete", @event, method: :delete, data: {confirm: "Are you sure you want to delete this event?"} %>

<p> <%= @event.name %> </p>
<p> <%= @event.start_date %> - <%= @event.end_date %></p>

<p> <%= @event.start_time.strftime("%I:%M %p") %> - <%= @event.end_time.strftime("%I:%M %p") %></p>
<p id= "address"> <%= @event.address %></p>

 <div id="map" style="width: 320px; height: 480px;"></div>

<p> <%= @event.description %></p>



<% if current_user.admin %>
    <td>
    <%= form_for @event, url: event_admin_reviews_path(@event), method: :post, :data => {confirm: 'Are you sure that you would like to approve this event?'} do |f| %>
        <%= f.submit "Approve event" %> 
    <% end %> 
    </td> 

    <td>
    <%= form_for @event, url: event_admin_reviews_destroy_path(@event), method: :delete, :data => {confirm: 'Are you sure you would like to delete this event? '} do |f| %>
    <%= f.submit "Delete event" %> 
    <% end %> 
    </td>

    <td>    
    <% if @event.does_require_update  %> 
    <button type="button"  disabled  >Require update</button>
    <% elsif @event.does_require_update == false %> 
        
        <button >Require update</button>
    

        <div class = 'update-form'>
            <%= form_for @event, url: event_admin_reviews_patch_path(@event), method: :put, :data => {confirm: 'Are you sure you would like to require this update?'}, :html => { :class => 'update_form' } do |f| %>
            <h3><%= f.label :update_required_explanation %></h3>
            <br>
            <%= f.text_area :update_required_explanation, size: "35x8" %>
            <%= f.submit "Require event update", :class => 'submit-button' %> 
            <% end %> 
        </div>
    <% end %> 
    </td>

    <td>
        <% if @event.does_require_update %>
            <%= @event.update_required_explanation %> 
        <% end %>
    </td>

    <p> Return to <u> <%= link_to ' All non-approved events', admin_events_path, :class => 'item' %> </u> </p>
<% end %>



